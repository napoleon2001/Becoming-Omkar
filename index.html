<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Becoming Omkar - Dark Rustic Growth Hub</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Libre+Baskerville&family=Roboto+Slab&display=swap');

  /* Dark rustic theme */
  body {
    margin: 0;
    font-family: 'Libre Baskerville', serif;
    background: #1b1a17;
    color: #ccc7b9;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }
  header {
    background: #3c352f;
    padding: 15px 30px;
    font-size: 1.8rem;
    font-weight: 700;
    letter-spacing: 2px;
    color: #f4f1de;
    text-shadow: 1px 1px 2px #000000cc;
  }
  nav {
    background: #2d2a24;
    display: flex;
    justify-content: center;
    gap: 30px;
  }
  nav button {
    background: none;
    border: none;
    color: #ccc7b9;
    font-size: 1.1rem;
    padding: 15px 20px;
    cursor: pointer;
    border-bottom: 3px solid transparent;
    font-family: 'Roboto Slab', serif;
    transition: border-color 0.3s ease, color 0.3s ease;
  }
  nav button.active, nav button:hover {
    color: #f4f1de;
    border-bottom: 3px solid #f4f1de;
  }
  main {
    flex: 1;
    padding: 25px 40px;
    max-width: 900px;
    margin: 0 auto;
    background: #29241f;
    box-shadow: 0 0 15px #000a inset;
    border-radius: 10px;
    overflow-y: auto;
  }
  h2 {
    font-family: 'Libre Baskerville', serif;
    font-size: 2rem;
    margin-bottom: 15px;
    color: #e9d8a6;
    text-shadow: 1px 1px 3px #000a;
  }
  /* Tasks styling */
  #taskList label {
    display: block;
    margin-bottom: 14px;
    font-size: 1.15rem;
    cursor: pointer;
    position: relative;
    padding-left: 32px;
    user-select: none;
  }
  #taskList input[type="checkbox"] {
    position: absolute;
    left: 0;
    top: 3px;
    width: 22px;
    height: 22px;
    cursor: pointer;
  }
  #taskList input[type="checkbox"]:checked + span {
    text-decoration: line-through;
    color: #7f7f7f;
  }
  .completed-time {
    color: #a89f91;
    font-size: 0.9rem;
    margin-left: 8px;
    font-style: italic;
  }
  /* Quotes & stories styling */
  blockquote {
    font-style: italic;
    border-left: 5px solid #f4f1de;
    margin: 1rem 0 1rem 0;
    padding-left: 15px;
    color: #dfd7c0;
  }
  /* Stories & long text container */
  .story-container {
    max-height: 400px;
    overflow-y: auto;
    background: #1f1c17;
    padding: 15px;
    border-radius: 8px;
    box-shadow: inset 0 0 10px #0008;
    line-height: 1.5;
    font-size: 1rem;
    color: #d0c8b0;
  }
  /* Small tab for editing tasks */
  #editTasksToggle {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #3c352f;
    border: none;
    color: #f4f1de;
    padding: 12px 18px;
    font-size: 1rem;
    border-radius: 30px;
    cursor: pointer;
    box-shadow: 0 0 10px #000;
    z-index: 1000;
  }
  #editTasksPanel {
    position: fixed;
    bottom: 70px;
    right: 20px;
    width: 300px;
    max-height: 350px;
    background: #29241f;
    border-radius: 10px;
    box-shadow: 0 0 15px #000;
    padding: 15px;
    overflow-y: auto;
    display: none;
    font-size: 1rem;
    color: #f4f1de;
    font-family: 'Roboto Slab', serif;
    z-index: 999;
  }
  #editTasksPanel textarea {
    width: 100%;
    height: 200px;
    background: #3c352f;
    border: none;
    border-radius: 6px;
    color: #ccc7b9;
    font-family: 'Roboto Slab', serif;
    font-size: 1rem;
    padding: 10px;
    resize: vertical;
  }
  #editTasksPanel button {
    margin-top: 10px;
    background: #f4f1de;
    color: #3c352f;
    border: none;
    padding: 10px 15px;
    border-radius: 6px;
    font-weight: 700;
    cursor: pointer;
    width: 100%;
  }
  /* Animations */
  .fade-in {
    animation: fadeIn 1s ease forwards;
  }
  @keyframes fadeIn {
    from {opacity: 0;}
    to {opacity: 1;}
  }
  /* Responsive */
  @media(max-width: 600px) {
    main {
      padding: 15px 20px;
    }
    nav {
      gap: 15px;
    }
    nav button {
      padding: 10px 12px;
      font-size: 1rem;
    }
  }
</style>
</head>
<body>
<header>Becoming Omkar - Growth Hub</header>
<nav>
  <button class="tab-btn active" data-tab="tasks">Tasks</button>
  <button class="tab-btn" data-tab="quotes">Quotes</button>
  <button class="tab-btn" data-tab="stories">Psychological Stories</button>
  <button class="tab-btn" data-tab="greats">Napoleon & Great Minds</button>
  <button class="tab-btn" data-tab="truths">Hard Truths</button>
</nav>

<main>
  <section id="tasks" class="tab-content fade-in">
    <h2>Daily Tasks</h2>
    <div id="taskList"></div>
  </section>
  <section id="quotes" class="tab-content" style="display:none;">
    <h2>Deep Quotes</h2>
    <blockquote id="quoteText"></blockquote>
    <p id="quoteAuthor" style="text-align:right; font-weight:bold; color:#bfb18f;"></p>
  </section>
  <section id="stories" class="tab-content" style="display:none;">
    <h2>Psychological Stories & Thoughts</h2>
    <div class="story-container" id="storyContent"></div>
  </section>
  <section id="greats" class="tab-content" style="display:none;">
    <h2>Napoleon & Great Minds</h2>
    <div class="story-container" id="greatsContent"></div>
  </section>
  <section id="truths" class="tab-content" style="display:none;">
    <h2>Hard Truths</h2>
    <div class="story-container" id="truthsContent"></div>
  </section>
</main>

<button id="editTasksToggle" title="Edit Tasks">⚙️ Edit Tasks</button>
<div id="editTasksPanel">
  <h3>Edit Your Tasks (one task per line):</h3>
  <textarea id="tasksTextarea"></textarea>
  <button id="saveTasksBtn">Save Tasks</button>
</div>

<script>
  // Data
  let tasks = [
    "Wake up early",
    "Read 3 things you are grateful for (remember to feel grateful for being alive)",
    "Avoid social media",
    "Work out 20 mins",
    "Drink water",
    "Meditate 10 mins",
    "Sleep by 10 PM"
  ];

  const quotes = [
    {text: "He who conquers himself is the mightiest warrior.", author: "Confucius"},
    {text: "The obstacle is the way.", author: "Marcus Aurelius"},
    {text: "Victory belongs to the most persevering.", author: "Napoleon Bonaparte"},
    {text: "What we achieve inwardly will change outer reality.", author: "Plutarch"},
    {text: "The happiness of your life depends upon the quality of your thoughts.", author: "Marcus Aurelius"},
    {text: "Small daily improvements lead to stunning results.", author: "Robin Sharma"},
    {text: "Do not pray for an easy life, pray for the strength to endure a difficult one.", author: "Bruce Lee"},
    {text: "The only limit to our realization of tomorrow is our doubts of today.", author: "Franklin D. Roosevelt"},
    {text: "Success is not final, failure is not fatal: It is the courage to continue that counts.", author: "Winston Churchill"},
    {text: "The mind is everything. What you think you become.", author: "Buddha"}
  ];

  const stories = [
    `In a small village, a man faced constant despair. Every day he chose to write three things he was grateful for, no matter how small. Slowly, his perspective shifted — he began to see light through the cracks of his suffering. Gratitude rewired his brain and saved his life.`,
    `A soldier fighting in a brutal war journaled his fears and doubts every night. By confronting his inner darkness, he gained mastery over his mind. This courage was his true victory, more than any battlefield conquest.`,
    `A woman overwhelmed by social media’s chaos committed to avoid it for a month. The silence gave her clarity, helping her reconnect with her purpose and passions. She discovered the power of being present rather than distracted.`,
    `Napoleon once said, "A leader is a dealer in hope." Small acts of hope in daily life ripple out, shaping the future more than grand gestures. Never underestimate the power of your daily mindset shift.`
  ];

  const greats = [
    `Napoleon Bonaparte rose from obscurity to reshape Europe. His secret: relentless self-discipline and belief in the impossible. He knew that changing oneself was the first step to changing the world.`,
    `Marcus Aurelius, a Roman emperor and stoic philosopher, taught that we control only our thoughts and actions. The rest is fate. This inner freedom is the core of true strength.`,
    `Friedrich Nietzsche challenged norms and dared to question truth itself. His idea of becoming 'the Overman' is about transcending limits to create your own values.`,
    `Leonardo da Vinci combined art and science, curiosity and discipline, proving the power of a versatile mind and constant learning.`
  ];

  const truths = [
    `Life is unfair — accepting this truth frees you from pointless resentment and lets you focus on what you can control.`,
    `You won't always feel motivated; discipline is what bridges the gap between goals and achievements.`,
    `You cannot change others, only yourself. Changing yourself often changes how others treat you.`,
    `Time is your most valuable resource. Spend it on what truly matters — distractions steal your future.`,
    `Fear and discomfort are signs that you are growing. Lean into them rather than avoiding.`,
    `Success demands sacrifice. Choose what you're willing to give up for what you want.`,
    `Most people live small because they fear failure. Be willing to fail big to win big.`
  ];

  // Elements
  const tabs = document.querySelectorAll('.tab-btn');
  const contents = document.querySelectorAll('.tab-content');
  const taskList = document.getElementById('taskList');
  const quoteText = document.getElementById('quoteText');
  const quoteAuthor = document.getElementById('quoteAuthor');
  const storyContent = document.getElementById('storyContent');
  const greatsContent = document.getElementById('greatsContent');
  const truthsContent = document.getElementById('truthsContent');

  // Task completion storage
  let completedTasks = JSON.parse(localStorage.getItem('completedTasks')) || [];
  let completionTimes = JSON.parse(localStorage.getItem('completionTimes')) || {};

  // Render tabs
  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      tabs.forEach(b => b.classList.remove('active'));
      tab.classList.add('active');
      const target = tab.dataset.tab;
      contents.forEach(c => {
        if(c.id === target) c.style.display = '';
        else c.style.display = 'none';
      });
      if(target === 'quotes') loadQuote();
      if(target === 'stories') loadStory();
      if(target === 'greats') loadGreats();
      if(target === 'truths') loadTruth();
    });
  });

  // Render tasks with timestamp
  function renderTasks() {
    taskList.innerHTML = '';
    tasks.forEach((task, i) => {
      const label = document.createElement('label');
      const completed = completedTasks.includes(i);
      label.innerHTML = `
        <input type="checkbox" data-index="${i}" ${completed ? 'checked' : ''} />
        <span>${task}</span>
        ${completed ? `<span class="completed-time">(Completed at ${completionTimes[i]})</span>` : ''}
      `;
      taskList.appendChild(label);
    });

    // Add listeners to checkboxes
    taskList.querySelectorAll('input[type=checkbox]').forEach(cb => {
      cb.addEventListener('change', e => {
        const idx = Number(e.target.dataset.index);
        if(e.target.checked) {
          if(!completedTasks.includes(idx)) {
            completedTasks.push(idx);
            const now = new Date();
            completionTimes[idx] = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            saveTasksProgress();
            runConfetti();
            renderTasks();
          }
        } else {
          completedTasks = completedTasks.filter(i => i !== idx);
          delete completionTimes[idx];
          saveTasksProgress();
          renderTasks();
        }
      });
    });
  }

  // Save tasks progress to localStorage
  function saveTasksProgress() {
    localStorage.setItem('completedTasks', JSON.stringify(completedTasks));
    localStorage.setItem('completionTimes', JSON.stringify(completionTimes));
  }

  // Random quote
  function loadQuote() {
    const r = Math.floor(Math.random() * quotes.length);
    quoteText.textContent = `"${quotes[r].text}"`;
    quoteAuthor.textContent = `— ${quotes[r].author}`;
  }

  // Random psychological story
  function loadStory() {
    const r = Math.floor(Math.random() * stories.length);
    storyContent.textContent = stories[r];
  }

  // Random great mind story
  function loadGreats() {
    const r = Math.floor(Math.random() * greats.length);
    greatsContent.textContent = greats[r];
  }

  // Random hard truth
  function loadTruth() {
    const r = Math.floor(Math.random() * truths.length);
    truthsContent.textContent = truths[r];
  }

  // Confetti animation for task completion
  function runConfetti() {
    const duration = 1 * 1000;
    const animationEnd = Date.now() + duration;
    const colors = ['#bb0000', '#ffffff', '#f4f1de', '#d4af37'];

    (function frame() {
      confetti({
        particleCount: 5,
        angle: 60,
        spread: 55,
        origin: { x: 0 },
        colors: colors
      });
      confetti({
        particleCount: 5,
        angle: 120,
        spread: 55,
        origin: { x: 1 },
        colors: colors
      });

      if (Date.now() < animationEnd) {
        requestAnimationFrame(frame);
      }
    }());
  }

  // Init
  renderTasks();

  // Start with quotes loaded
  loadQuote();

  // Tab style on first load
  contents.forEach(c => {
    if(c.id !== 'tasks') c.style.display = 'none';
  });

  // ----------- Edit tasks panel ------------
  const editTasksToggle = document.getElementById('editTasksToggle');
  const editTasksPanel = document.getElementById('editTasksPanel');
  const tasksTextarea = document.getElementById('tasksTextarea');
  const saveTasksBtn = document.getElementById('saveTasksBtn');

  editTasksToggle.addEventListener('click', () => {
    if(editTasksPanel.style.display === 'none' || !editTasksPanel.style.display) {
      tasksTextarea.value = tasks.join('\n');
      editTasksPanel.style.display = 'block';
    } else {
      editTasksPanel.style.display = 'none';
    }
  });

  saveTasksBtn.addEventListener('click', () => {
    const newTasks = tasksTextarea.value
      .split('\n')
      .map(t => t.trim())
      .filter(t => t.length > 0);
    if(newTasks.length > 0) {
      tasks = newTasks;
      // Reset progress on task change
      completedTasks = [];
      completionTimes = {};
      saveTasksProgress();
      renderTasks();
      editTasksPanel.style.display = 'none';
      alert('Tasks updated successfully!');
    } else {
      alert('Please enter at least one task.');
    }
  });

  // Include confetti library
  (function() {
    var script = document.createElement('script');
    script.src = 'https://cdn.jsdelivr.net/npm/canvas-confetti@
